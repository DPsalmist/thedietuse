{% extends 'layout.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

  <div class="col-12 grid-margin">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">ORDER DETAIL</h4>
        <form class="form-sample">
          <p class="card-description">
            View the details of food order <code> {{ object.id }} </code>
          </p>
          <div class="row">

            <!-- Customer Order's History -->
            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Payment Status:  <code>
                    <b> 
                      {% if object.payment_status  == 'Pending' %}
                        <span style="color:red;">PENDING</span>
                      {% elif object.payment_status  == 'Received' %}
                        <span style="color:lightgreen;">RECEIVED</span>
                      {% elif object.payment_status  == 'Refunded' %}
                        <span style="color:rosybrown;">REFUNDED</span>
                      {% endif %}
                    </b></code></h4> <hr>
                    <h4 class="card-title">Order Cost: <code>N{{ object.total_cost }}</code></h4>
                  <div class="table-responsive pt-3">
                    <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th>
                            <li>Order Menu: {{ object.menu }}</li>
                            <li>Order Status:
                              {% if object.order_status  == 'Received' %}
                                <span style="color:blue;">Received</span>
                              {% elif object.payment_status  == 'Incoming' %}
                                <span style="color:yellow;">Incoming</span>
                              {% elif object.payment_status  == 'Delivered' %}
                                <span style="color:green;">Delivered</span>
                              {% elif object.payment_status  == 'Rejected' %}
                                <span style="color:red;">Rejected</span>
                             {% endif %}
                           </li>
                            <li>Order Price: N{{ object.menu.price }}</li>
                            <li>Total Plates: {{ object.no_of_plates }}</li>
                            <li>Delivery Address: {{ object.delivery_address }}</li>
                            <li>Order Message: {{ object.message }}</li>
                            <li>Order ID: {{ object.order_id }}</li>
                            <li>Order Date: {{ object.date_created }} </li>
                          </th>

                         
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            {% if request.user.username == 'gabby' %}
                              <a href="{% url 'confirm-payment' object.pk %}" class="btn btn-block btn-primary">Confirm Payment</a>
                            {% endif %}
                            {% if object.payment_status == 'Received' %}
                              Payment Received
                            {% else %}
                              <a href="https://paystack.com/pay/thedietmuse" target="_blank" class="btn btn-block btn-primary">Proceed to payment</a>
                            {% endif %}
                          </td>
                         </tr>
                    
                    
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            
                 
          </div>
          
        </form>
      </div>
    </div>
  </div>

{% endblock content %}

